"use strict";(self.webpackChunkreact_note_docusaurus=self.webpackChunkreact_note_docusaurus||[]).push([[2786],{3905:function(e,t,n){n.d(t,{Zo:function(){return i},kt:function(){return u}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),E=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},i=function(e){var t=E(e.components);return r.createElement(l.Provider,{value:t},e.children)},T={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},s=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),s=E(n),u=o,_=s["".concat(l,".").concat(u)]||s[u]||T[u]||a;return n?r.createElement(_,c(c({ref:t},i),{},{components:n})):r.createElement(_,c({ref:t},i))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=s;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,c[1]=p;for(var E=2;E<a;E++)c[E]=n[E];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}s.displayName="MDXCreateElement"},2546:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return E},toc:function(){return i},default:function(){return y}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),c=["components"],p={id:"react-is",sidebar_label:"react-is",slug:"/react/react/scheduler/others/react-is",sidebar_position:1,title:""},l=void 0,E={unversionedId:"react/react/scheduler/others/react-is",id:"react/react/scheduler/others/react-is",isDocsHomePage:!1,title:"",description:"\u901a\u8fc7API\uff1atypeOf\u7406\u89e3react\u4e2d\u5404\u79cd\u7ec4\u4ef6\u7c7b\u578b\u7684\u5173\u7cfb\u3002\u7406\u89e3portal\u7c7b\u578b\u4e0ereactElement\u7c7b\u578b\u7684\u6784\u5efa\u8fc7\u7a0b\uff0c\u4e0e\u4f7f\u7528\u533a\u522b\u3002\u68b3\u7406react\u4e2d\u7684\u7c7b\u578b\uff0c\u4e24\u5927\u7c7b\u578b\u7684\u6784\u5efa\u8fc7\u7a0b\u3002",source:"@site/docs/react/react/scheduler/others/react-is.md",sourceDirName:"react/react/scheduler/others",slug:"/react/react/scheduler/others/react-is",permalink:"/ReactNote/docs/react/react/scheduler/others/react-is",editUrl:"https://github.com/BUPTlhuanyu/ReactNote/tree/master/docs/react/react/scheduler/others/react-is.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"react-is",sidebar_label:"react-is",slug:"/react/react/scheduler/others/react-is",sidebar_position:1,title:""},sidebar:"react",previous:{title:"\u5bf9\u9f50frame\u7248\u672c\u7684scheduler",permalink:"/ReactNote/docs/react/react/scheduler/old-scheduler"},next:{title:"scheduler-code-details",permalink:"/ReactNote/docs/react/react/scheduler/others/scheduler-code-details"}},i=[{value:"API",id:"api",children:[]},{value:"memo\u7ec4\u4ef6\u7684\u6784\u5efa\u8fc7\u7a0b",id:"memo\u7ec4\u4ef6\u7684\u6784\u5efa\u8fc7\u7a0b",children:[]},{value:"createPortal\u7684\u6784\u5efa\u8fc7\u7a0b",id:"createportal\u7684\u6784\u5efa\u8fc7\u7a0b",children:[]},{value:"typeOf",id:"typeof",children:[]}],T=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)}},s=T("MyComponent"),u=T("Portal"),_={toc:i};function y(e){var t=e.components,n=(0,o.Z)(e,c);return(0,a.kt)("wrapper",(0,r.Z)({},_,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u901a\u8fc7API\uff1atypeOf\u7406\u89e3react\u4e2d\u5404\u79cd\u7ec4\u4ef6\u7c7b\u578b\u7684\u5173\u7cfb\u3002\u7406\u89e3portal\u7c7b\u578b\u4e0ereactElement\u7c7b\u578b\u7684\u6784\u5efa\u8fc7\u7a0b\uff0c\u4e0e\u4f7f\u7528\u533a\u522b\u3002\u68b3\u7406react\u4e2d\u7684\u7c7b\u578b\uff0c\u4e24\u5927\u7c7b\u578b\u7684\u6784\u5efa\u8fc7\u7a0b\u3002"),(0,a.kt)("h3",{id:"api"},"API"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"typeOf\nisConcurrentMode  \u5e76\u53d1\u6a21\u5f0f\nisContextConsumer\nisContextProvider\nisElement\nisForwardRef\nisFragment\nisProfiler  \u6027\u80fd\u5206\u6790\u6a21\u5f0f\nisPortal\nisStrictMode \u4e25\u683c\u6a21\u5f0f\n")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"memo\u7ec4\u4ef6\u7684\u6784\u5efa\u8fc7\u7a0b"},"memo\u7ec4\u4ef6\u7684\u6784\u5efa\u8fc7\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'function testMemo(){\n    const MyComponent = React.memo(function MyComponent(props) {\n        return (\n            <div>\n                this is memo\n            </div>\n        )\n    });\n    console.log("<MyComponent />",<MyComponent />)\n    console.log("MyComponent",MyComponent)\n    ReactDOM.render(\n        <MyComponent />,\n        document.getElementById(\'app\')\n    );\n}\n')),(0,a.kt)("h4",{id:"\u6784\u5efamemo\u7c7b\u578b\u5bf9\u8c61"},"\u6784\u5efamemo\u7c7b\u578b\u5bf9\u8c61"),(0,a.kt)("p",null,"React.memo\u51fd\u6570\u8fd4\u56de\u4e00\u4e2areact\u7c7b\u578b\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"{\n    $$typeof: REACT_MEMO_TYPE,\n    type,\n    compare: compare === undefined ? null : compare,\n  }\n")),(0,a.kt)("p",null,"\u6253\u5370\u7ed3\u679c\u4e3a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$$typeof:Symbol(react.memo)\ncompare:null\ntype:\u0192 MyComponent(props)\n")),(0,a.kt)("h4",{id:"\u5c06memo\u7c7b\u578b\u5bf9\u8c61\u6784\u5efa\u4e3areactelement\u5bf9\u8c61"},"\u5c06memo\u7c7b\u578b\u5bf9\u8c61\u6784\u5efa\u4e3areactElement\u5bf9\u8c61"),(0,a.kt)("p",null,"\u6267\u884c",(0,a.kt)(s,{mdxType:"MyComponent"}),"\u8bed\u53e5\u7684\u65f6\u5019\uff0c\u5c31\u662f\u8c03\u7528createElement\u51fd\u6570\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u521b\u5efa\u4e3a\u4e00\u4e2areactElement\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$$typeof:Symbol(react.element)\nkey:null\nprops:{}\nref:null\ntype:{$$typeof: Symbol(react.memo), type: \u0192, compare: null}\n_owner:null\n_store:{validated: false}\n")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"createportal\u7684\u6784\u5efa\u8fc7\u7a0b"},"createPortal\u7684\u6784\u5efa\u8fc7\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"const app = document.getElementById('app');\nconst Portal = ReactDOM.createPortal(<div>\"portal\"</div>, app);\nconsole.log(\"Portal\",Portal)\nReactDOM.render(\n    Portal,\n    document.getElementById('app')\n);\n")),(0,a.kt)("p",null,"\u4e0a\u8ff0\u4ee3\u7801\uff0creact\u5148\u5c06",(0,a.kt)("inlineCode",{parentName:"p"},'<div>"portal"</div>'),"\u90e8\u5206\u8c03\u7528createElement\u751f\u6210ReactElement\u5bf9\u8c61\uff0c\u7136\u540e\u4f5c\u4e3a\u53c2\u6570children\u4f20\u5165\uff0ccreatePortal\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1achildren\u548c\u771f\u5b9e\u7684DOM\u6216\u8005\u7ec4\u4ef6\u3002\u7136\u540e\u8fd4\u56de\u4e00\u4e2aportal\u7c7b\u578b\u7684react\u5bf9\u8c61\uff0c\u4e0ereactElement\u7c7b\u578b\u533a\u522b\u5f00\uff0c\u8be5portal\u4e0d\u80fd\u518d\u88ab\u521b\u5efa\u4e3areactElement\u7c7b\u578b\uff0c\u5373\u4e0d\u80fd\u5199\u6210",(0,a.kt)(u,{mdxType:"Portal"}),"\u3002\u56e0\u4e3a\u521b\u5efa\u4e3areactElement\u7c7b\u578b\u5bf9\u8c61\uff0c\u4f1a\u8c03\u7528createElementWithValidation\u5bf9Portal\u8fdb\u884c\u9a8c\u8bc1\uff0c\u8c03\u7528isValidElementType(Portal)\u8fd4\u56de\u7684\u7ed3\u679c\u4e3afalse\uff0c\u76f4\u63a5\u62a5\u9519\u3002\u5177\u4f53\u7ec6\u8282\u8bf7\u53c2\u770b",(0,a.kt)("a",{parentName:"p",href:"https://github.com/BUPTlhuanyu/ReactNote/blob/master/react/blog/D3/react%e6%ba%90%e7%a0%81%e6%b5%85%e6%9e%90(%e4%b8%89)%ef%bc%9aReactElementValidator.md"},"9\u3001react\u6e90\u7801\u6d45\u6790(\u4e09)\uff1aReactElementValidator")),(0,a.kt)("p",null,"isValidElementType\u6e90\u7801\u4e3a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"export default function isValidElementType(type: mixed) {\n  return (\n    typeof type === 'string' ||\n    typeof type === 'function' ||\n    // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n    type === REACT_FRAGMENT_TYPE ||\n    type === REACT_CONCURRENT_MODE_TYPE ||\n    type === REACT_PROFILER_TYPE ||\n    type === REACT_STRICT_MODE_TYPE ||\n    type === REACT_SUSPENSE_TYPE ||\n    (typeof type === 'object' &&\n      type !== null &&\n      (type.$$typeof === REACT_LAZY_TYPE ||\n        type.$$typeof === REACT_MEMO_TYPE ||\n        type.$$typeof === REACT_PROVIDER_TYPE ||\n        type.$$typeof === REACT_CONTEXT_TYPE ||\n        type.$$typeof === REACT_FORWARD_REF_TYPE))\n  );\n}\n")),(0,a.kt)("p",null,"\u62a5\u9519\u4e3a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"warning(\n  false,\n  'React.createElement: type is invalid -- expected a string (for ' +\n    'built-in components) or a class/function (for composite ' +\n    'components) but got: %s.%s',\n  typeString,\n  info,\n);\n")),(0,a.kt)("h3",{id:"typeof"},"typeOf"),(0,a.kt)("p",null,"\u7528\u4e8e\u5224\u65ad\u4f20\u5165\u7684react\u7684\u7c7b\u578b\uff0c\u4e00\u5b9a\u662f\u7ecf\u8fc7ReactElement\nreact\u5143\u7d20\u7c7b\u578b\u4e3a\u4e24\u5927\u7c7b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"reactType1 : {\n    $$typeof : REACT_ELEMENT_TYPE,\n    type : REACT_ASYNC_MODE_TYPE | \n           REACT_CONCURRENT_MODE_TYPE |\n           REACT_FRAGMENT_TYPE |\n           REACT_PROFILER_TYPE |\n           REACT_STRICT_MODE_TYPE |\n           REACT_SUSPENSE_TYPE |  //\u8fd4\u56deREACT_CONTEXT_TYPE\uff0cREACT_FORWARD_REF_TYPE\uff0cREACT_PROVIDER_TYPE\uff0cREACT_ELEMENT_TYPE\u4e2d\u7684\u4e00\u79cd\n           {\n                $$typeof :  REACT_CONTEXT_TYPE |\n                            REACT_FORWARD_REF_TYPE |\n                            REACT_PROVIDER_TYPE |\n                            REACT_MEMO_TYPE | //typeOf\u8fd4\u56deREACT_ELEMENT_TYPE\n                            REACT_LAZY_TYPE   //typeOf\u8fd4\u56deREACT_ELEMENT_TYPE\n            }\n}\n\nreactType2 : {\n    $$typeof : REACT_PORTAL_TYPE\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5176\u4e2dtype.$$typeof\u8fd8\u53ef\u4ee5\u4e3aREACT","_","MEMO","_","TYPE\u6216\u8005REACT","_","LAZY","_","TYPE\uff0ctypeOf\u5728\u68c0\u6d4b\u5230\u662fREACT","_","MEMO","_","TYPE\u6216\u8005REACT","_","LAZY","_","TYPE\u7684\u65f6\u5019\uff0c\u8fd4\u56deREACT","_","ELEMENT","_","TYPE\u3002"),(0,a.kt)("li",{parentName:"ol"},"type\u8fd8\u53ef\u4ee5\u662fREACT","_","SUSPENSE","_","TYPE\uff0c\u4f46\u662ftypeOf\u5728\u68c0\u6d4b\u5230REACT","_","SUSPENSE","_","TYPE\u7684\u65f6\u5019\uff0c\u4f1a\u7ee7\u7eed\u68c0\u6d4btype.$$typeof\u7684\u503c\uff0c\u53ef\u4ee5\u8fd4\u56deREACT","_","CONTEXT_TYPE\uff0cREACT","_","FORWARD","_","REF","_","TYPE\uff0cREACT","_","PROVIDER","_","TYPE\uff0cREACT","_","ELEMENT","_","TYPE\u4e2d\u7684\u4e00\u79cd\u3002")),(0,a.kt)("p",null,"\u6e90\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"export function typeOf(object: any) {\n  if (typeof object === 'object' && object !== null) {\n    const $$typeof = object.$$typeof;\n    //\u5148\u5224\u65adobject.$$typeof\uff0c\n    // \u5982\u679c\u662fREACT_ELEMENT_TYPE\uff0c\u7ee7\u7eed\u5224\u65adtype\n    // \u5982\u679c\u662fREACT_PORTAL_TYPE\uff0c\u8fd4\u56deREACT_PORTAL_TYPE\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        const type = object.type;\n        //\u5224\u65adobject.type\uff0c\u5982\u679c\u662f\u5982\u4e0b\u7c7b\u578b\u5219\u8fd4\u56de\u8be5\u7c7b\u578b\uff1a\n        //   REACT_ASYNC_MODE_TYPE\n        //   REACT_CONCURRENT_MODE_TYPE\n        //   REACT_FRAGMENT_TYPE\n        //   REACT_PROFILER_TYPE\n        //   REACT_STRICT_MODE_TYPE\n        //  \u5982\u679c\u90fd\u4e0d\u662f\uff0c\u5219\u5224\u65adobject.type.$$typeof\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n            return type;\n          default:\n            const $$typeofType = type && type.$$typeof;\n            // \u5982\u679cobject.type.$$typeof\u662f\u5982\u4e0b\u7c7b\u578b\uff0c\u5219\u8fd4\u56de\u8be5\u7c7b\u578b\uff1a\n            //   REACT_CONTEXT_TYPE\n            //   REACT_FORWARD_REF_TYPE\n            //   REACT_PROVIDER_TYPE\n            //  \u5982\u679c\u90fd\u4e0d\u662f\u5219\u8fd4\u56deobject.$$typeof\uff0c\u8be5\u503c\u4e0d\u5c5e\u4e8ereact\u7c7b\u578b\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n              default:\n                //\u68c0\u6d4b\u5230\u662fREACT_MEMO_TYPE\u6216\u8005REACT_LAZY_TYPE\u7684\u65f6\u5019\uff0c\u8fd4\u56deREACT_ELEMENT_TYPE\n                return $$typeof;\n            }\n        }\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n")))}y.isMDXComponent=!0}}]);