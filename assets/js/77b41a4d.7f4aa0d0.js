"use strict";(self.webpackChunkreact_note_docusaurus=self.webpackChunkreact_note_docusaurus||[]).push([[7646],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return s}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),o=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=o(e.components);return r.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=o(t),s=a,f=u["".concat(p,".").concat(s)]||u[s]||m[s]||l;return t?r.createElement(f,i(i({ref:n},d),{},{components:t})):r.createElement(f,i({ref:n},d))}));function s(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,i=new Array(l);i[0]=u;var c={};for(var p in n)hasOwnProperty.call(n,p)&&(c[p]=n[p]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var o=2;o<l;o++)i[o]=t[o];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9491:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return p},metadata:function(){return o},toc:function(){return d},default:function(){return u}});var r=t(7462),a=t(3366),l=(t(7294),t(3905)),i=["components"],c={id:"reactelement-and-children",sidebar_label:"ReactElement\u4ee5\u53caChildren",slug:"/react/react/ReactElement/reactelement-and-children",sidebar_position:2,title:""},p=void 0,o={unversionedId:"react/react/ReactElement/reactelement-and-children",id:"react/react/ReactElement/reactelement-and-children",isDocsHomePage:!1,title:"",description:"\u4e0a\u7bc7\u4ecb\u7ecd\u4e86React \u5bf9\u8c61\u4e2d\u4e0e\u7ec4\u4ef6\u76f8\u5173\u7684 API \u7684\u5b9e\u73b0\u4ee5\u53ca\u5404\u79cd\u7ec4\u4ef6\u79cd\u7c7b\u4e0eReactElement\u7684\u5173\u7cfb\u3002\u672c\u7bc7\u5c06\u4f1a\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u4e00\u4e2a ReactElement\uff0c\u4ee5\u53ca Children \u5404\u4e2a\u65b9\u6cd5\u7684\u5b9e\u73b0\u539f\u7406\u3002",source:"@site/docs/react/react/ReactElement/reactelement-and-children.md",sourceDirName:"react/react/ReactElement",slug:"/react/react/ReactElement/reactelement-and-children",permalink:"/ReactNote/docs/react/react/ReactElement/reactelement-and-children",editUrl:"https://github.com/BUPTlhuanyu/ReactNote/tree/master/docs/react/react/ReactElement/reactelement-and-children.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"reactelement-and-children",sidebar_label:"ReactElement\u4ee5\u53caChildren",slug:"/react/react/ReactElement/reactelement-and-children",sidebar_position:2,title:""},sidebar:"react",previous:{title:"\u516c\u5171\u65b9\u6cd5",permalink:"/ReactNote/docs/react/react/shared"},next:{title:"\u7ec4\u4ef6\u4e0eReactElement\u7684\u5173\u7cfb",permalink:"/ReactNote/docs/react/react/ReactElement/component-reactelement"}},d=[{value:"ReactElement",id:"reactelement",children:[{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784",children:[]},{value:"\u5982\u4f55\u521b\u5efa",id:"\u5982\u4f55\u521b\u5efa",children:[]}]},{value:"Children",id:"children",children:[]},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",children:[]}],m={toc:d};function u(e){var n=e.components,t=(0,a.Z)(e,i);return(0,l.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"\u4e0a\u7bc7\u4ecb\u7ecd\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"React")," \u5bf9\u8c61\u4e2d\u4e0e\u7ec4\u4ef6\u76f8\u5173\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"API")," \u7684\u5b9e\u73b0\u4ee5\u53ca\u5404\u79cd\u7ec4\u4ef6\u79cd\u7c7b\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u7684\u5173\u7cfb\u3002\u672c\u7bc7\u5c06\u4f1a\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\uff0c\u4ee5\u53ca ",(0,l.kt)("inlineCode",{parentName:"p"},"Children")," \u5404\u4e2a\u65b9\u6cd5\u7684\u5b9e\u73b0\u539f\u7406\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\nconst React = {\n  // \u7ec4\u4ef6\n    ...\n  // ReactElement\n  createElement: createElement,\n  cloneElement: cloneElement,\n  createFactory: createFactory,\n  isValidElement: isValidElement,\n  Children: {\n    map,\n    forEach,\n    count,\n    toArray,\n    only,\n  },\n  // hooks\n    ...\n};\n")),(0,l.kt)("h2",{id:"reactelement"},"ReactElement"),(0,l.kt)("p",null,"\u5148\u7b80\u5355\u7684\u56de\u987e\u4e00\u4e0b",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u4e0e\u7ec4\u4ef6\u7684\u5173\u7cfb\uff0c\u7ec4\u4ef6\u5206\u4e3a\u5f88\u591a\u79cd\u7c7b\u578b\uff0c\u5728\u7f16\u8bd1\u65f6\u7ecf\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"babel"),"\u5904\u7406\u8fc7\u540e\uff0c\u6700\u7ec8\u5728\u8fd0\u884c\u65f6\u90fd\u4f1a\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"createELment"),"\u51fd\u6570\u521b\u5efa\u6210\u4e3a\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"ReactELement"),"\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u9996\u5148\u4ecb\u7ecd\u4e00\u4e0b",(0,l.kt)("inlineCode",{parentName:"p"},"ReactELement"),"\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7136\u540e\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u3002"),(0,l.kt)("h3",{id:"\u6570\u636e\u7ed3\u6784"},"\u6570\u636e\u7ed3\u6784"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"  const element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n\n    // Record the component responsible for creating this element.\n    _owner: owner,\n  };\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"$$typeof"),"\uff1a\u4e4b\u524d\u7684\u6587\u7ae0\u63d0\u5230\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"$$typeof"),"\u5c5e\u6027\u8868\u793a\u7ec4\u4ef6\u7684\u3010\u7c7b\u578b\u3011\uff0c\u5e76\u4e14\u5176\u503c\u662f\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"symbol"),"\u6216\u8005\u662f\u4e00\u4e2a\u5341\u516d\u8fdb\u5236\u7684\u6570\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"JSON.parse"),"\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"JSON.stringify")," \u65e0\u6cd5\u5bf9\u8fd9\u6837\u7684\u503c\u8fdb\u884c\u4e92\u8f6c\uff0c\u7275\u5f3a\u7684\u8bf4\u4e5f\u80fd\u591f\u9884\u9632\u5b58\u50a8\u578b\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"xss"),"\uff09\u653b\u51fb\uff0c\u6bd4\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"<div> {parsedData} </div>"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"type"),"\uff1a\u8868\u793a\u7ec4\u4ef6\u884c\u4e3a\uff0c\u4e0a\u4e00\u7bc7\u5df2\u7ecf\u4e3a\u7ed5\u8fc7\u8fd9\u4e2a\u5c5e\u6027\u8bf4\u660e\u4e86\u4e0d\u540c\u7c7b\u578b\u7ec4\u4ef6\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"type"),"\u7684\u5173\u7cfb\uff0c\u7ec4\u4ef6\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"ref"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"props"),"\uff1a\u5e38\u7528\u5c5e\u6027\uff0c\u4e0d\u8d58\u8ff0\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"_owner"),"\uff1a\u7ec4\u4ef6\u5b9a\u4e49\u7684\u65f6\u5019\u6240\u5728\u7ec4\u4ef6\u5bf9\u5e94\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u3002"),(0,l.kt)("h3",{id:"\u5982\u4f55\u521b\u5efa"},"\u5982\u4f55\u521b\u5efa"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"creatElement\u51fd\u6570\u4e2d\u963b\u6b62ref\u3001key\u7b49\u5c5e\u6027\u8d4b\u503c\u7ed9props\uff0c\u6240\u4ee5react\u5143\u7d20\u7684key\u548cref\u4e0d\u4f1a\u5728props\u4e0a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"function createElement(type, config, children) {\n  const props = {};\n  let key = null, ref = null, self = null, source = null;\n\n  if (config != null) {\n        ref = config.ref !== undefined && config.ref;\n    key = config.key !== undefined && '' + config.key\n    self = config.__self === undefined ? null : config.__self;\n    source = config.__source === undefined ? null : config.__source;\n    // \u5c06config\u4e0a\u5176\u4f59\u7684\u5c5e\u6027\u503c\u8d4b\u503c\u5230props\u76f8\u540c\u5c5e\u6027\u4e0a\n        ...\n  }\n    // \u7b2c\u4e09\u4e2a\u53c2\u6570\u6216\u8005\u540e\u9762\u53c2\u6570\u4f1a\u88ab\u5904\u7406\u6210props.children\u4e0a\n    ...\n  if (type && type.defaultProps) {\n    // 1. state\u4e2d\u7684\u503c\u4f18\u5148\u7ea7\u5927\u4e8etype.defaultProps\u7684\u503c\n    // 2. defaultProps\u4e2d\u5b58\u5728\u4f46\u662fstate\u4e2d\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u662f\u65e0\u6548\u7684\n        ...\n  }\n  return ReactElement(\n    type,\n    key,\n    ref,\n    self,\n    source,\n    ReactCurrentOwner.current, // owner\n    props,\n  );\n}\n")),(0,l.kt)("p",null,"\u5728\u521b\u5efa",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u7ec4\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"props"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u514b\u9686\u4e00\u4e2aReactELement\u4e0e\u4e4b\u7c7b\u4f3c"),"\uff1a\u514b\u9686\u7ed9\u5b9a\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"element"),"\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u5143\u7d20\u3002 \u6240\u4ea7\u751f\u7684\u5143\u7d20\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"props"),"\u7531\u539f\u59cb\u5143\u7d20\u7684",(0,l.kt)("inlineCode",{parentName:"p"}," props"),"\u88ab\u65b0\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"props")," \u6d45\u5c42\u5408\u5e76\u800c\u6765\uff0c\u5e76\u4e14\u5982\u679c\u6700\u7ec8\u5408\u5e76\u540e\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"props"),"\u7684\u5c5e\u6027\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"undefined"),"\uff0c\u5c31\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"element.type.defaultProps"),"\u7684\u503c\u8fdb\u884c\u8bbe\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"React.cloneElement(\n  element,\n  [props],\n  [...children]\n)\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4f8b\u5b50\u76f8\u5f53\u4e8e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"<element.type {...element.props} {...props}>{children}</element.type>\n")),(0,l.kt)("p",null,"\u6ce8\u610f\u8fd9\u91cc",(0,l.kt)("inlineCode",{parentName:"p"},"JSX"),"\u4f1a\u501f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"createElement"),"\u9690\u5f0f\u5904\u7406",(0,l.kt)("inlineCode",{parentName:"p"},"defaultProps"),"\uff0c\u56e0\u6b64\u4e0a\u9762\u8868\u8fbe\u5f0f\u6ca1\u6709\u76f4\u63a5\u4f53\u73b0\u51fa\u6765\u3002"),(0,l.kt)("h2",{id:"children"},"Children"),(0,l.kt)("p",null,"\u9012\u5f52\u5b9e\u73b0\u7684\u6df1\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u7531\u4e8e\u9700\u8981\u8ba1\u7b97\u6811\u7684\u8282\u70b9\u4e2a\u6570\uff0c\u56e0\u6b64\u4e5f\u65e0\u6cd5\u4f7f\u7528\u5c3e\u9012\u5f52\u4f18\u5316\uff0c\u4f1a\u51fa\u73b0\u7206\u6808\u7684\u95ee\u9898\u3002\u7b80\u5355\u7684\u5b9e\u73b0\u5982\u4e0b\uff0c\u4e5f\u7b97\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u7b97\u6cd5\u9898\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let result = [];\nfunction traverseChildren(children, result, callback) {\n  let num = 0;\n  callback(children);\n  result.push(children);\n    if (typeof children === 'string' | typeof children === 'number') {\n      return ++num;\n  } else if (Array.isArray(children)) {\n      children.forEach(child = > {\n        num += traverseChildren(child, result, callback)\n      });\n  }\n  return num;\n}\n")),(0,l.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,l.kt)("p",null,"\u5230\u6b64",(0,l.kt)("inlineCode",{parentName:"p"},"React"),"\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4ecb\u7ecd\u5b8c\u6bd5\uff0c\u4e0a\u7bc7\u4ecb\u7ecd\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"React")," \u5bf9\u8c61\u4e2d\u4e0e\u7ec4\u4ef6\u76f8\u5173\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"API")," \u7684\u5b9e\u73b0\u4ee5\u53ca\u5404\u79cd\u7ec4\u4ef6\u79cd\u7c7b\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\u7684\u5173\u7cfb\uff1b\u5982\u4f55\u521b\u5efa\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement"),"\uff0c\u4ee5\u53ca ",(0,l.kt)("inlineCode",{parentName:"p"},"Children")," \u5404\u4e2a\u65b9\u6cd5\u7684\u5b9e\u73b0\u539f\u7406\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u9700\u8981\u7262\u8bb0\u4e00\u4e2a\u6982\u5ff5\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement.$$typeof"),"\u8868\u793a\u7ec4\u4ef6\u7684\u3010\u7c7b\u578b\u3011\u4e0e`",(0,l.kt)("inlineCode",{parentName:"p"},"ReactElement.type"),"\u8868\u793a\u7ec4\u4ef6\u7684\u3010\u884c\u4e3a\u3011\u3002"),(0,l.kt)("p",null,"\u540e\u7eed\u7684\u6587\u7ae0\u7684\u4e3b\u9898\u5c06\u4f1a\u6df1\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"fiber"),"\u67b6\u6784\u4e0e\u65f6\u95f4\u5206\u7247\u3002"))}u.isMDXComponent=!0}}]);